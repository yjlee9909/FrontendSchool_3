<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>클래스 이용한 투두리스트 만들기</title>
    <style>

    </style>
</head>
<body>
    <script>
        // 간단한 투두 리스트기능 구현해보기
        // 1. 해야할 일 Todo 클래스(내용, 상태 두 가지 프로퍼티(상태)를 가집니다.)
        // 2. Todo 클래스는 상태를 변경하는 changeState 메서드를 가집니다.
        // 3. 할일의 목록을 관리하는 관리자를 추상화한 TodoManager 클래스 (할일 목록을 프로퍼티로 가집니다.)
        // 4. 할 일을 저장하고(addItem), 할 일의 목록을 보여주며(getItems), 할 일의 남은 갯수를 반환하는(getLeftTodoCount) 세 가지 메소드를 가집니다.
        // class Todo {
        //     constructor(내용, 상태){
        //         this.el1 = 내용;
        //         this.el2 = 상태;
        //     }
        //     changeState(){
        //         this.el2 = !(this.el2);
        //     }
        // }

        // class TodoManager {
        //     constructor(){
        //         this.todoList = [];
        //     }
        //     addItem(내용) {
        //         const newTodo = new Todo(내용, false);
        //         this.todoList.push(newTodo);
        //     }
        //     getItems() {
        //         return this.todoList;
        //     }
        //     getLeftTodoCount() {
        //         return this.todoList.filter(item => item.state === false).length;
        //     }
        // }
        // const myTodo = new TodoManager();
        // console.log(myTodo)
        // myTodo.addItem('점심먹고 10분간 잠자기');
        // console.log(myTodo.getItems());// 배열로
        // console.log(myTodo.getLeftTodoCount());
        // myTodo.getItems()[0].changeState(); // 할 일이 끝났다고 판단 (finished: true로 변화)
        // // 갯수 변화  
        // console.log(myTodo.getLeftTodoCount());
        // console.log(myTodo.getItems());



        ///////////////////////////////////// 따라해보기
        class Todo {
            constructor(item, finished) {
                // 인스턴스와 연결시키기
                this.item = item;
                this.finished = finished;
            }
            changeState() {
                this.finished = !this.finished;
            }
        }
        class TodoManager {
            constructor() {
                // 할 일 목록을 프로퍼티로
                this.todoList = [];
            }
            // 전달 받은 인자 값 초기화 시켜서 할당하기
            // 상태값 까지 전달하면 그 값은 finished에 전달
            // addItem('할일')은 item에만 전달됨 꼭 두 가지 인자를 전달할 필요는 없음
            addItem(item, finished = false) {
                const todo = new Todo(item, finished);
                this.todoList.push(todo);
            }
            getItems() {
                return this.todoList;
            }
            getLeftTodoCount() {
                // 아직 안한 일들의 숫자만 반환 상태가 true인 것만
                return this.todoList
                .filter((item1) => item1.finished === false).length


                /// reduce
                // return this.todoList.reduce((total, current) => {
                //     if(current.finished === false) {
                //         return ++total;
                //     } else {
                //         return total;
                //     }
                // }, 0) // 숫자 전달 => 누산기의 초기값 설정 가능 (total = 0) total에 카운드가 누적
            }

        }

        ///// 다시 해보기
        const manager = new TodoManager();
        console.log(manager);
        (manager.addItem('노래부르기'));
        (manager.addItem('노래부르기22'));
        console.log(manager.getItems());
        manager.getItems()[0].finished = true;
        console.log(manager.getLeftTodoCount());
        console.log(manager.getItems());
        // const myTodo = new TodoManager();
        // console.log(myTodo)
        // myTodo.addItem('점심먹고 10분간 잠자기');
        // console.log(myTodo.getItems());// 배열로
        // console.log(myTodo.getLeftTodoCount());
        // myTodo.getItems()[0].changeState(); // 할 일이 끝났다고 판단 (finished: true로 변화)
        // // 갯수 변화  
        // console.log(myTodo.getLeftTodoCount());
        // console.log(myTodo.getItems());

    </script>
</body>
</html>